# Copyright 2024 Magnus Sjalander <work@sjalander.com>
# See COPYING for terms of redistribution.

libmlir_SOURCES = \
	jlm/mlir/backend/mlirgen.cpp \
	jlm/mlir/frontend/rvsdggen.cpp \

libmlir_HEADERS = \
	jlm/mlir/backend/mlirgen.hpp \
	jlm/mlir/frontend/rvsdggen.hpp \

libmlir_TESTS += \
	tests/jlm/mlir/backend/TestMlirGen \
	tests/jlm/mlir/frontend/TestRvsdgGen \

libmlir_TEST_LIBS += \
	libmlir \
	libllvm \
	librvsdg \
	libutil \
	libjlmtest \

libmlir_TEST_EXTRA_LDFLAGS = \
	$(shell $(LLVMCONFIG) --ldflags --libs --system-libs) \
	-L$(MLIR_PATH)/lib \
        -lMLIR \
        -lMLIRJLM \
        -lMLIRRVSDG \

$(eval $(call common_library,libmlir))
